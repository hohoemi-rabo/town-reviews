# 009: 管理画面

## 概要
投稿の管理・削除・編集ができる管理者専用画面

## 優先度
🟡 高

## 見積もり時間
8時間

## Phase
Phase 1 - Week 3

## 詳細仕様

### 管理者権限
- 全投稿の閲覧
- 24時間経過後も編集・削除可能
- 不適切投稿の削除
- 投稿統計の閲覧

### 管理画面機能

#### 1. 投稿一覧
- 新着順/通報順でソート
- ページネーション（20件/ページ）
- 検索・フィルタ機能
- 一括選択・一括削除

#### 2. 投稿詳細・編集
- すべての項目を編集可能
- 編集履歴の記録
- 削除理由の記録

#### 3. 統計ダッシュボード
- 総投稿数
- 今月の投稿数
- 人気スポットTOP10
- タグ使用状況
- リアクション統計

#### 4. ユーザー管理
- IP別投稿数
- 不適切投稿の多いIPの特定

### 認証
- 環境変数による簡易認証
- `ADMIN_PASSWORD`で保護
- セッション管理（Cookie）

## 実装タスク

- [ ] 管理画面レイアウト作成
  - [ ] `/admin`ページ作成
  - [ ] サイドバーナビゲーション
  - [ ] ヘッダー
- [ ] 認証機能実装
  - [ ] ログインページ（`/admin/login`）
  - [ ] パスワード検証API
  - [ ] セッション管理（Cookie）
  - [ ] ミドルウェアで保護
- [ ] 投稿一覧機能
  - [ ] テーブル表示
  - [ ] ソート機能
  - [ ] ページネーション
  - [ ] 一括選択
- [ ] 投稿編集機能
  - [ ] 編集モーダル
  - [ ] すべてのフィールド編集可能
  - [ ] 編集履歴記録
- [ ] 投稿削除機能
  - [ ] 削除確認モーダル
  - [ ] 削除理由入力
  - [ ] 一括削除
- [ ] 統計ダッシュボード実装
  - [ ] 総投稿数表示
  - [ ] グラフ表示（Chart.js）
  - [ ] 期間絞り込み
- [ ] ユーザー管理機能
  - [ ] IP別統計表示
  - [ ] ブロック機能（将来）
- [ ] 監査ログ機能
  - [ ] 管理者操作の記録
  - [ ] ログ一覧表示

## 関連ファイル
- `src/app/admin/page.tsx` (作成)
- `src/app/admin/login/page.tsx` (作成)
- `src/app/admin/posts/page.tsx` (作成)
- `src/app/admin/stats/page.tsx` (作成)
- `src/components/Admin/PostTable.tsx` (作成)
- `src/components/Admin/EditModal.tsx` (作成)
- `src/components/Admin/StatsChart.tsx` (作成)
- `src/app/api/admin/auth/route.ts` (作成)
- `src/middleware.ts` (更新)

## 完了条件
- [×] 管理画面にログインできる
- [×] 投稿一覧が表示される
- [×] 投稿を編集できる
- [×] 投稿を削除できる
- [×] 統計が正しく表示される
- [×] 不正アクセスが防止されている
- [×] 操作ログが記録される

## 備考
- 本番環境では強力なパスワードを設定
- 将来的には本格的な認証システム（Auth.js）に移行
- 監査ログは別テーブルで管理
